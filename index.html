<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IG 私訊助手</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>IG 私訊助手</h1>
        </header>

        <!-- 登入區 -->
        <div class="init-section" id="initSection">
            <div class="login-container">
                <h2>🔐 登入 Instagram</h2>
                <div class="login-form">
                    <div class="form-group">
                        <label for="usernameInput">帳號</label>
                        <input 
                            type="text" 
                            id="usernameInput" 
                            class="form-input" 
                            placeholder="請輸入 Instagram 帳號"
                        />
                    </div>
                    <div class="form-group">
                        <label for="passwordInput">密碼</label>
                        <input 
                            type="password" 
                            id="passwordInput" 
                            class="form-input" 
                            placeholder="請輸入密碼"
                        />
                    </div>
                    <button class="btn btn-primary btn-large" id="loginBtn">
                        🚀 登入
                    </button>
                    <button class="btn btn-secondary" id="initBtn" style="margin-top: 10px;">
                        🔄 初始化（使用已保存的登入狀態）
                    </button>
                </div>
                <p class="hint">⚠️ 完全基於 HTTP API，無需打開瀏覽器！</p>
                <p class="hint">💡 首次登入後會自動保存狀態，下次可直接初始化</p>
            </div>
        </div>

        <!-- 主要功能區 -->
        <div class="main-section" id="mainSection" style="display: none;">
            <!-- 操作按鈕組 -->
            <div class="button-grid">
                <button class="btn btn-secondary" id="exportFollowersBtn">
                    <span class="icon">👥</span>
                    匯出粉絲
                </button>
                <button class="btn btn-secondary" id="importBtn">
                    <span class="icon">📥</span>
                    匯入 IG 帳號
                </button>
                <button class="btn btn-primary" id="startBtn">
                    <span class="icon">▶️</span>
                    開始群發
                </button>
            </div>

            <!-- 控制按鈕 -->
            <div class="control-buttons">
                <button class="btn btn-outline" id="pauseBtn" disabled>
                    <span class="icon">⏸️</span>
                    暫停
                </button>
                <button class="btn btn-outline" id="resumeBtn" disabled>
                    <span class="icon">▶️</span>
                    繼續
                </button>
                <button class="btn btn-outline" id="stopBtn" disabled>
                    <span class="icon">⏹️</span>
                    停止
                </button>
            </div>

            <!-- 狀態顯示 -->
            <div class="status-bar" id="statusBar">
                <div class="status-indicator" id="statusIndicator">⚪</div>
                <div class="status-text" id="statusText">待命中</div>
            </div>

            <!-- 任務列表 -->
            <div class="task-section">
                <div class="task-header">
                    <h3>任務列表 (<span id="taskCount">0</span>)</h3>
                    <div class="task-stats">
                        <span class="stat">
                            <span class="stat-label">完成:</span>
                            <span id="completedCount" class="stat-value">0</span>
                        </span>
                        <span class="stat">
                            <span class="stat-label">失敗:</span>
                            <span id="failedCount" class="stat-value">0</span>
                        </span>
                        <span class="stat">
                            <span class="stat-label">等待:</span>
                            <span id="pendingCount" class="stat-value">0</span>
                        </span>
                    </div>
                </div>
                
                <div class="task-list" id="taskList">
                    <div class="empty-state">
                        <p>📋 尚無任務</p>
                        <p class="hint">點擊「匯入 IG 帳號」開始</p>
                    </div>
                </div>
            </div>

            <!-- 進度條 -->
            <div class="progress-section" id="progressSection" style="display: none;">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-text" id="progressText">0 / 0</div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="footer">
        </footer>
    </div>

    <!-- 載入提示 -->
    <div class="loading-overlay" id="loadingOverlay" style="display: none;">
        <div class="loading-spinner"></div>
        <p id="loadingText">處理中...</p>
    </div>

    <!-- 匯出進度對話框 -->
    <div class="modal" id="exportModal" style="display: none;">
        <div class="modal-content">
            <h2>📥 匯出粉絲</h2>
            <div class="modal-body">
                <label for="exportUsername">Instagram 帳號名稱：</label>
                <input 
                    type="text" 
                    id="exportUsername" 
                    class="input" 
                    placeholder="例如：instagram"
                >
                
                <div class="range-inputs" style="margin-top: 15px;">
                    <h4 style="margin-bottom: 10px; color: #555;">📍 抓取範圍（選填）</h4>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <div>
                            <label for="exportStart" style="font-size: 13px;">從第幾個開始：</label>
                            <input 
                                type="number" 
                                id="exportStart" 
                                class="input" 
                                placeholder="留空 = 從頭開始"
                                min="1"
                            >
                        </div>
                        <div>
                            <label for="exportEnd" style="font-size: 13px;">到第幾個結束：</label>
                            <input 
                                type="number" 
                                id="exportEnd" 
                                class="input" 
                                placeholder="留空 = 抓到最後"
                                min="1"
                            >
                        </div>
                    </div>
                    <p class="hint" style="margin-top: 8px; font-size: 12px;">
                        💡 範例：從第 101 個到第 500 個，可輸入 start=101, end=500<br>
                        💡 留空則抓取全部粉絲
                    </p>
                </div>
                
                <div class="export-progress" id="exportProgress" style="display: none;">
                    <p id="exportStatus">正在抓取粉絲...</p>
                    <p class="export-count">已抓取：<span id="exportCount">0</span> 個粉絲</p>
                    <p class="export-count">已掃描：<span id="exportTotal">0</span> 個</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelExportBtn">取消</button>
                <button class="btn btn-primary" id="confirmExportBtn">開始匯出</button>
            </div>
        </div>
    </div>

    <script src="renderer.js"></script>
</body>
</html>

