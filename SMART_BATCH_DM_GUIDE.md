# ğŸš€ æ™ºèƒ½æ‰¹é‡å‘é€ DM ä½¿ç”¨æŒ‡å—

## âœ¨ åŠŸèƒ½ç‰¹ç‚¹

è¿™æ˜¯ä¸€ä¸ª**æ™ºèƒ½æ‰¹é‡å‘é€ DM** ç³»ç»Ÿï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| âœ… **æ™ºèƒ½é”™è¯¯æ£€æµ‹** | è‡ªåŠ¨è¯†åˆ« 9 ç§é”™è¯¯ç±»å‹ |
| âœ… **è‡ªåŠ¨æš‚åœ** | æ£€æµ‹åˆ°è´¦å·é—®é¢˜æ—¶è‡ªåŠ¨æš‚åœ |
| âœ… **æ‰‹åŠ¨å¹²é¢„** | æ”¯æŒéªŒè¯åç»§ç»­å‘é€ |
| âœ… **è‡ªåŠ¨è·³è¿‡** | è‡ªåŠ¨è·³è¿‡ä¸å­˜åœ¨æˆ–å±è”½çš„ç”¨æˆ· |
| âœ… **è‡ªåŠ¨é‡è¯•** | ç½‘ç»œé”™è¯¯è‡ªåŠ¨é‡è¯• |
| âœ… **è¯¦ç»†æŠ¥å‘Š** | ç”Ÿæˆå®Œæ•´çš„å‘é€æŠ¥å‘Š |

### ğŸ” æ”¯æŒçš„é”™è¯¯ç±»å‹

| é”™è¯¯ç±»å‹ | å¤„ç†æ–¹å¼ | è¯´æ˜ |
|---------|---------|------|
| è´¦å·è¢«é™åˆ¶ | ğŸ›‘ **æš‚åœç­‰å¾…** | éœ€è¦éªŒè¯åç»§ç»­ |
| éœ€è¦éªŒè¯ | ğŸ›‘ **æš‚åœç­‰å¾…** | å®ŒæˆéªŒè¯åç»§ç»­ |
| éœ€è¦é‡æ–°ç™»å…¥ | ğŸ›‘ **æš‚åœç­‰å¾…** | é‡æ–°ç™»å…¥åç»§ç»­ |
| åƒåœ¾ä¿¡æ¯æ£€æµ‹ | ğŸ›‘ **æš‚åœç­‰å¾…** | ä¿®æ”¹æ¶ˆæ¯åç»§ç»­ |
| é€Ÿç‡é™åˆ¶ | â±ï¸ **è‡ªåŠ¨ç­‰å¾…** | ç­‰å¾… 30 ç§’åç»§ç»­ |
| ç”¨æˆ·ä¸å­˜åœ¨ | â­ï¸ **è‡ªåŠ¨è·³è¿‡** | è·³è¿‡è¯¥ç”¨æˆ· |
| ç”¨æˆ·å·²å±è”½ | â­ï¸ **è‡ªåŠ¨è·³è¿‡** | è·³è¿‡è¯¥ç”¨æˆ· |
| ç½‘ç»œé”™è¯¯ | ğŸ”„ **è‡ªåŠ¨é‡è¯•** | é‡è¯• 3 æ¬¡ |
| æœªçŸ¥é”™è¯¯ | â“ **è¯¢é—®ç”¨æˆ·** | æ‰‹åŠ¨å†³å®š |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹æ³• 1ï¼šä½¿ç”¨æ¼”ç¤ºè„šæœ¬ï¼ˆæ¨èï¼‰

```bash
node demo-smart-batch-dm.js
```

æŒ‰ç…§æç¤ºï¼š
1. è¾“å…¥ç™»å…¥ä¿¡æ¯
2. è¾“å…¥ç›®æ ‡ç”¨æˆ·ï¼ˆæ¯è¡Œä¸€ä¸ªï¼‰
3. è¾“å…¥æ¶ˆæ¯å†…å®¹
4. ç¡®è®¤å¹¶å¼€å§‹å‘é€

### æ–¹æ³• 2ï¼šåœ¨ä»£ç ä¸­ä½¿ç”¨

```javascript
const InstagramAPI = require('./src/instagram-api');
const SmartBatchDM = require('./src/smart-batch-dm');

async function sendMessages() {
    // 1. åˆ›å»º API å®ä¾‹
    const igAPI = new InstagramAPI();
    
    // 2. ç™»å…¥
    await igAPI.login('your_username', 'your_password');
    
    // 3. åˆ›å»ºæ‰¹é‡å‘é€å®ä¾‹
    const batchDM = new SmartBatchDM(igAPI);
    
    // 4. å‡†å¤‡æ•°æ®
    const users = ['user1', 'user2', 'user3'];
    const message = 'Hello! è¿™æ˜¯ä¸€æ¡æµ‹è¯•æ¶ˆæ¯ã€‚';
    
    // 5. å¼€å§‹å‘é€
    const result = await batchDM.sendBatch(users, message, {
        delay: 5000, // æ¯æ¡æ¶ˆæ¯é—´éš” 5 ç§’
        onProgress: (progress) => {
            console.log(`è¿›åº¦: ${progress.current}/${progress.total}`);
        }
    });
    
    // 6. æŸ¥çœ‹ç»“æœ
    console.log('æˆåŠŸ:', result.success.length);
    console.log('å¤±è´¥:', result.failed.length);
    console.log('è·³è¿‡:', result.skipped.length);
    
    // 7. ä¿å­˜æŠ¥å‘Š
    batchDM.saveReport('report.json');
}

sendMessages();
```

---

## ğŸ“– è¯¦ç»†ä½¿ç”¨è¯´æ˜

### åœºæ™¯ 1ï¼šæ­£å¸¸å‘é€

```javascript
const batchDM = new SmartBatchDM(igAPI);

await batchDM.sendBatch(
    ['user1', 'user2', 'user3'], // ç›®æ ‡ç”¨æˆ·
    'Hello!', // æ¶ˆæ¯
    { delay: 5000 } // é€‰é¡¹
);
```

**æµç¨‹ï¼š**
1. å¼€å§‹å‘é€ç»™ user1 â†’ âœ… æˆåŠŸ
2. ç­‰å¾… 5 ç§’
3. å¼€å§‹å‘é€ç»™ user2 â†’ âœ… æˆåŠŸ
4. ç­‰å¾… 5 ç§’
5. å¼€å§‹å‘é€ç»™ user3 â†’ âœ… æˆåŠŸ
6. æ˜¾ç¤ºæŠ¥å‘Š

---

### åœºæ™¯ 2ï¼šé‡åˆ°è´¦å·é™åˆ¶

```
[1/10] æ­£åœ¨å‘é€ç»™ @user1...
âœ… æˆåŠŸå‘é€ç»™ @user1

[2/10] æ­£åœ¨å‘é€ç»™ @user2...
âœ… æˆåŠŸå‘é€ç»™ @user2

[3/10] æ­£åœ¨å‘é€ç»™ @user3...

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âš ï¸  è´¦å·è¢«é™åˆ¶
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ç›®æ ‡ç”¨æˆ·: @user3
é”™è¯¯ä¿¡æ¯: Action blocked. Please try again later.

æ‚¨çš„è´¦å·å› å¼‚å¸¸æ´»åŠ¨è¢« Instagram æš‚æ—¶é™åˆ¶ã€‚

è¯·åœ¨æµè§ˆå™¨ä¸­ç™»å…¥å¹¶å®ŒæˆéªŒè¯ï¼Œç„¶åè¾“å…¥ "ç»§ç»­" æ¢å¤å‘é€ã€‚

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

è¯·é€‰æ‹©æ“ä½œï¼š
  1. ç»§ç»­ (c/continue) - éªŒè¯å®Œæˆï¼Œç»§ç»­å‘é€
  2. è·³è¿‡ (s/skip) - è·³è¿‡å½“å‰ç”¨æˆ·ï¼Œç»§ç»­ä¸‹ä¸€ä¸ª
  3. é‡è¯• (r/retry) - é‡è¯•å½“å‰ç”¨æˆ·
  4. åœæ­¢ (q/quit) - åœæ­¢æ‰€æœ‰å‘é€

è¾“å…¥é€‰æ‹©: 
```

**å¤„ç†æ­¥éª¤ï¼š**

1. **æ‰“å¼€æµè§ˆå™¨** â†’ ç™»å…¥ Instagram
2. **å®ŒæˆéªŒè¯** â†’ æŒ‰ç…§æç¤ºæ“ä½œ
3. **è¿”å›ç¨‹åº** â†’ è¾“å…¥ `c` æˆ– `ç»§ç»­`
4. **ç»§ç»­å‘é€** â†’ ä» user3 ç»§ç»­

---

### åœºæ™¯ 3ï¼šç”¨æˆ·ä¸å­˜åœ¨ï¼ˆè‡ªåŠ¨è·³è¿‡ï¼‰

```
[5/10] æ­£åœ¨å‘é€ç»™ @nonexistent_user...

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â„¹ï¸  ç”¨æˆ·ä¸å­˜åœ¨
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ç›®æ ‡ç”¨æˆ·: @nonexistent_user
é”™è¯¯ä¿¡æ¯: User not found

ç›®æ ‡ç”¨æˆ·ä¸å­˜åœ¨æˆ–å·²åˆ é™¤è´¦å·ã€‚

å·²è‡ªåŠ¨è·³è¿‡è¯¥ç”¨æˆ·ã€‚

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ å·²è·³è¿‡ç”¨æˆ· @nonexistent_user

[6/10] æ­£åœ¨å‘é€ç»™ @user6...
```

**è‡ªåŠ¨å¤„ç†ï¼š**
- âœ… è‡ªåŠ¨è·³è¿‡
- âœ… ç»§ç»­ä¸‹ä¸€ä¸ªç”¨æˆ·
- âœ… è®°å½•åˆ°è·³è¿‡åˆ—è¡¨

---

### åœºæ™¯ 4ï¼šé€Ÿç‡é™åˆ¶ï¼ˆè‡ªåŠ¨ç­‰å¾…ï¼‰

```
[7/10] æ­£åœ¨å‘é€ç»™ @user7...

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â±ï¸  è¯·æ±‚è¿‡äºé¢‘ç¹
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ç›®æ ‡ç”¨æˆ·: @user7
é”™è¯¯ä¿¡æ¯: Rate limit exceeded

æ‚¨å‘é€æ¶ˆæ¯å¤ªå¿«äº†ã€‚

ç¨‹åºå°†è‡ªåŠ¨ç­‰å¾… 30 ç§’åç»§ç»­...

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ç­‰å¾… 30 ç§’...

[7/10] æ­£åœ¨å‘é€ç»™ @user7...
âœ… æˆåŠŸå‘é€ç»™ @user7
```

**è‡ªåŠ¨å¤„ç†ï¼š**
- âœ… è‡ªåŠ¨ç­‰å¾… 30 ç§’
- âœ… è‡ªåŠ¨é‡è¯•
- âœ… æ— éœ€æ‰‹åŠ¨æ“ä½œ

---

## ğŸ® ç”¨æˆ·æ“ä½œé€‰é¡¹

å½“é‡åˆ°éœ€è¦æ‰‹åŠ¨å¹²é¢„çš„é”™è¯¯æ—¶ï¼Œæ‚¨å¯ä»¥é€‰æ‹©ï¼š

### 1. ç»§ç»­ (c/continue)

**ä½¿ç”¨åœºæ™¯ï¼š**
- âœ… å·²å®Œæˆæµè§ˆå™¨éªŒè¯
- âœ… å·²é‡æ–°ç™»å…¥
- âœ… å·²ä¿®æ”¹æ¶ˆæ¯å†…å®¹

**æ•ˆæœï¼š**
- é‡ç½®é‡è¯•æ¬¡æ•°
- ä»å½“å‰ç”¨æˆ·ç»§ç»­å‘é€

### 2. è·³è¿‡ (s/skip)

**ä½¿ç”¨åœºæ™¯ï¼š**
- âŒ å½“å‰ç”¨æˆ·æ— æ³•å‘é€
- âŒ ä¸æƒ³ç»§ç»­å°è¯•è¯¥ç”¨æˆ·

**æ•ˆæœï¼š**
- è·³è¿‡å½“å‰ç”¨æˆ·
- ç»§ç»­å‘é€ç»™ä¸‹ä¸€ä¸ª

### 3. é‡è¯• (r/retry)

**ä½¿ç”¨åœºæ™¯ï¼š**
- ğŸ”„ ä¸´æ—¶é”™è¯¯
- ğŸ”„ ç½‘ç»œæ³¢åŠ¨

**æ•ˆæœï¼š**
- ç«‹å³é‡è¯•å½“å‰ç”¨æˆ·
- æœ€å¤šé‡è¯• 3 æ¬¡

### 4. åœæ­¢ (q/quit)

**ä½¿ç”¨åœºæ™¯ï¼š**
- ğŸ›‘ ä¸æƒ³ç»§ç»­å‘é€
- ğŸ›‘ éœ€è¦æ£€æŸ¥é—®é¢˜

**æ•ˆæœï¼š**
- åœæ­¢æ‰€æœ‰å‘é€
- æ˜¾ç¤ºå½“å‰æŠ¥å‘Š

---

## ğŸ“Š å‘é€æŠ¥å‘Š

### ç»ˆç«¯æŠ¥å‘Š

å‘é€å®Œæˆåä¼šæ˜¾ç¤ºï¼š

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š å‘é€æŠ¥å‘Š
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

æ€»è®¡: 10 ä¸ªç”¨æˆ·
âœ… æˆåŠŸ: 7 ä¸ª
âŒ å¤±è´¥: 1 ä¸ª
â­ï¸  è·³è¿‡: 2 ä¸ª

æˆåŠŸå‘é€çš„ç”¨æˆ·:
  âœ… @user1
  âœ… @user2
  âœ… @user4
  âœ… @user5
  âœ… @user6
  âœ… @user8
  âœ… @user9

è·³è¿‡çš„ç”¨æˆ·:
  â­ï¸  @user3 (user_not_found)
  â­ï¸  @user7 (user_blocked)

å¤±è´¥çš„ç”¨æˆ·:
  âŒ @user10 - Network error (network_error)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### JSON æŠ¥å‘Š

ä¿å­˜åˆ°æ–‡ä»¶ï¼š

```json
{
  "timestamp": "2025-11-01T10:30:00.000Z",
  "total": 10,
  "success": [
    "user1",
    "user2",
    "user4",
    "user5",
    "user6",
    "user8",
    "user9"
  ],
  "failed": [
    {
      "username": "user10",
      "error": "Network error",
      "errorType": "network_error"
    }
  ],
  "skipped": [
    {
      "username": "user3",
      "reason": "user_not_found"
    },
    {
      "username": "user7",
      "reason": "user_blocked"
    }
  ]
}
```

---

## âš™ï¸ é…ç½®é€‰é¡¹

```javascript
await batchDM.sendBatch(users, message, {
    // æ¯æ¡æ¶ˆæ¯ä¹‹é—´çš„å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰
    delay: 5000, // é»˜è®¤ 5 ç§’
    
    // è¿›åº¦å›è°ƒ
    onProgress: (progress) => {
        console.log(`è¿›åº¦: ${progress.current}/${progress.total}`);
        console.log(`æˆåŠŸ: ${progress.success}`);
        console.log(`å¤±è´¥: ${progress.failed}`);
        console.log(`è·³è¿‡: ${progress.skipped}`);
    }
});
```

---

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. åˆç†çš„å‘é€é—´éš”

```javascript
// âœ… æ¨èï¼š5-10 ç§’
delay: 5000

// âš ï¸  å¯èƒ½è§¦å‘é™åˆ¶ï¼š< 3 ç§’
delay: 2000

// ğŸŒ å¤ªæ…¢ï¼š> 30 ç§’
delay: 30000
```

### 2. åˆ†æ‰¹å‘é€

```javascript
// å°†å¤§é‡ç”¨æˆ·åˆ†æˆå°æ‰¹æ¬¡
const allUsers = [...]; // 1000 ä¸ªç”¨æˆ·
const batchSize = 50;

for (let i = 0; i < allUsers.length; i += batchSize) {
    const batch = allUsers.slice(i, i + batchSize);
    
    await batchDM.sendBatch(batch, message, { delay: 5000 });
    
    // æ‰¹æ¬¡ä¹‹é—´ä¼‘æ¯ 5 åˆ†é’Ÿ
    if (i + batchSize < allUsers.length) {
        console.log('æ‰¹æ¬¡å®Œæˆï¼Œä¼‘æ¯ 5 åˆ†é’Ÿ...');
        await new Promise(r => setTimeout(r, 300000));
    }
}
```

### 3. ä½¿ç”¨æµ‹è¯•è´¦å·

```javascript
// âš ï¸  å…ˆåœ¨æµ‹è¯•è´¦å·ä¸Šæµ‹è¯•
await igAPI.login('test_account', 'password');

// å°è§„æ¨¡æµ‹è¯•
await batchDM.sendBatch(['test_user1', 'test_user2'], 'Test message');

// âœ… ç¡®è®¤æ²¡é—®é¢˜åå†ç”¨ä¸»è´¦å·
```

### 4. ç›‘æ§è¿›åº¦

```javascript
await batchDM.sendBatch(users, message, {
    delay: 5000,
    onProgress: (p) => {
        // ä¿å­˜è¿›åº¦åˆ°æ–‡ä»¶
        fs.writeFileSync('progress.json', JSON.stringify(p));
        
        // æ˜¾ç¤ºç™¾åˆ†æ¯”
        const percent = Math.round((p.current / p.total) * 100);
        console.log(`å®Œæˆ ${percent}%`);
    }
});
```

### 5. é”™è¯¯æ¢å¤

```javascript
// å¦‚æœä¸­é€”åœæ­¢ï¼Œå¯ä»¥ä»å¤±è´¥çš„ç”¨æˆ·ç»§ç»­
const report = JSON.parse(fs.readFileSync('batch-dm-report.json'));
const remainingUsers = [
    ...report.failed.map(f => f.username),
    ...report.skipped.map(s => s.username)
];

// é‡æ–°å‘é€ç»™å¤±è´¥/è·³è¿‡çš„ç”¨æˆ·
await batchDM.sendBatch(remainingUsers, message);
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. Instagram é™åˆ¶

| é™åˆ¶ç±»å‹ | æ¯å°æ—¶ | æ¯å¤© |
|---------|--------|------|
| å‘é€ DM | 30-50 | 100-200 |
| æ–°è´¦å· | æ›´ä½ | æ›´ä½ |
| å·²éªŒè¯è´¦å· | è¾ƒé«˜ | è¾ƒé«˜ |

### 2. é¿å…è¢«é™åˆ¶

- âœ… ä½¿ç”¨åˆç†çš„å‘é€é—´éš”ï¼ˆ5-10 ç§’ï¼‰
- âœ… æ¯å¤©å‘é€æ•°é‡æ§åˆ¶åœ¨ 50-100 ä»¥å†…
- âœ… é¿å…å‘é€ç›¸åŒå†…å®¹
- âœ… ä½¿ç”¨ä¸ªæ€§åŒ–æ¶ˆæ¯
- âœ… åªå‘é€ç»™çœŸå®ç”¨æˆ·

### 3. æ¶ˆæ¯å†…å®¹

- âœ… é¿å…åƒåœ¾ä¿¡æ¯å…³é”®è¯
- âœ… é¿å…åŒ…å«è¿‡å¤šé“¾æ¥
- âœ… ä½¿ç”¨ä¸ªæ€§åŒ–é—®å€™
- âœ… æä¾›çœŸå®ä»·å€¼

---

## ğŸ”§ æ•…éšœæ’é™¤

### é—®é¢˜ 1ï¼šä¸€ç›´æç¤ºè´¦å·è¢«é™åˆ¶

**åŸå› ï¼š** å‘é€å¤ªé¢‘ç¹æˆ–æ¶ˆæ¯è¢«æ ‡è®°ä¸ºåƒåœ¾ä¿¡æ¯

**è§£å†³æ–¹æ¡ˆï¼š**
1. ç­‰å¾… 24 å°æ—¶
2. å®Œæˆæµè§ˆå™¨éªŒè¯
3. ä¿®æ”¹æ¶ˆæ¯å†…å®¹
4. å¢åŠ å‘é€é—´éš”

### é—®é¢˜ 2ï¼šå¤§é‡ç”¨æˆ·è¢«è·³è¿‡

**åŸå› ï¼š** ç”¨æˆ·åé”™è¯¯æˆ–ç”¨æˆ·è®¾ç½®äº†éšç§

**è§£å†³æ–¹æ¡ˆï¼š**
1. æ£€æŸ¥ç”¨æˆ·åæ‹¼å†™
2. ç¡®è®¤ç”¨æˆ·å­˜åœ¨
3. ç¡®è®¤ç”¨æˆ·å…è®¸æ¥æ”¶æ¶ˆæ¯

### é—®é¢˜ 3ï¼šç¨‹åºå¡ä½ä¸åŠ¨

**åŸå› ï¼š** ç­‰å¾…ç”¨æˆ·è¾“å…¥

**è§£å†³æ–¹æ¡ˆï¼š**
1. æ£€æŸ¥ç»ˆç«¯æ˜¯å¦æœ‰æç¤º
2. æŒ‰ç…§æç¤ºè¾“å…¥é€‰æ‹©
3. å¦‚æœæ— å“åº”ï¼ŒæŒ‰ Ctrl+C é€€å‡º

---

## ğŸ“š å®Œæ•´ç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šåŸºæœ¬ä½¿ç”¨

```javascript
const InstagramAPI = require('./src/instagram-api');
const SmartBatchDM = require('./src/smart-batch-dm');

async function example1() {
    const igAPI = new InstagramAPI();
    await igAPI.login('username', 'password');
    
    const batchDM = new SmartBatchDM(igAPI);
    
    await batchDM.sendBatch(
        ['user1', 'user2', 'user3'],
        'Hello! è¿™æ˜¯ä¸€æ¡æµ‹è¯•æ¶ˆæ¯ã€‚',
        { delay: 5000 }
    );
    
    batchDM.saveReport('report.json');
}
```

### ç¤ºä¾‹ 2ï¼šå¸¦è¿›åº¦æ˜¾ç¤º

```javascript
async function example2() {
    const igAPI = new InstagramAPI();
    await igAPI.login('username', 'password');
    
    const batchDM = new SmartBatchDM(igAPI);
    
    await batchDM.sendBatch(
        ['user1', 'user2', 'user3'],
        'Hello!',
        {
            delay: 5000,
            onProgress: (p) => {
                const percent = Math.round((p.current / p.total) * 100);
                console.log(`è¿›åº¦: ${percent}% (${p.current}/${p.total})`);
                console.log(`æˆåŠŸ: ${p.success}, å¤±è´¥: ${p.failed}, è·³è¿‡: ${p.skipped}`);
            }
        }
    );
}
```

### ç¤ºä¾‹ 3ï¼šåˆ†æ‰¹å‘é€

```javascript
async function example3() {
    const igAPI = new InstagramAPI();
    await igAPI.login('username', 'password');
    
    const allUsers = ['user1', 'user2', ...]; // 100 ä¸ªç”¨æˆ·
    const batchSize = 20;
    
    for (let i = 0; i < allUsers.length; i += batchSize) {
        const batch = allUsers.slice(i, i + batchSize);
        
        console.log(`å‘é€æ‰¹æ¬¡ ${Math.floor(i/batchSize) + 1}...`);
        
        const batchDM = new SmartBatchDM(igAPI);
        await batchDM.sendBatch(batch, 'Hello!', { delay: 5000 });
        batchDM.saveReport(`report-batch-${i}.json`);
        
        // æ‰¹æ¬¡ä¹‹é—´ä¼‘æ¯
        if (i + batchSize < allUsers.length) {
            console.log('ä¼‘æ¯ 5 åˆ†é’Ÿ...');
            await new Promise(r => setTimeout(r, 300000));
        }
    }
}
```

---

## ğŸ‰ æ€»ç»“

æ™ºèƒ½æ‰¹é‡å‘é€ DM ç³»ç»Ÿæä¾›ï¼š

- âœ… **è‡ªåŠ¨é”™è¯¯æ£€æµ‹** - è¯†åˆ« 9 ç§é”™è¯¯ç±»å‹
- âœ… **æ™ºèƒ½å¤„ç†** - è‡ªåŠ¨æš‚åœ/è·³è¿‡/é‡è¯•
- âœ… **æ‰‹åŠ¨å¹²é¢„** - éœ€è¦æ—¶å¯ä»¥æ‰‹åŠ¨æ“ä½œ
- âœ… **è¯¦ç»†æŠ¥å‘Š** - å®Œæ•´çš„å‘é€è®°å½•
- âœ… **å®‰å…¨å¯é ** - é¿å…è´¦å·è¢«é™åˆ¶

**ç«‹å³å¼€å§‹ä½¿ç”¨ï¼š**

```bash
node demo-smart-batch-dm.js
```

ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼ğŸš€

