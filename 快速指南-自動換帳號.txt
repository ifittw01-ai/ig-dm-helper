================================================
   🎉 新功能：發送失敗自動清理並換帳號
================================================

✨ 這是什麼？
-------------
當群發過程中遇到登入問題時：
✅ 自動清理舊數據（類似 quick-fix.bat）
✅ 點一個按鈕即可換帳號繼續
✅ 無需重啟程序
✅ 進度完全保留


🚀 使用方法（超簡單）
---------------------

步驟 1：正常群發
  啟動程序 → 登入 → 匯入清單 → 開始群發

步驟 2：遇到登入問題時
  會彈出對話框：
  ┌──────────────────────────┐
  │ ⚠️ 檢測到登入問題         │
  │                          │
  │ [🔄 重新登入並繼續]      │
  └──────────────────────────┘

步驟 3：點擊【重新登入並繼續】
  按鈕會自動變成：
  [🧹 清理中...] → [✅ 清理完成]
  
  自動執行：
  ✓ 刪除 cookies.json
  ✓ 刪除 session.json  
  ✓ 刪除 ig-dm.db
  ✓ 重新初始化
  
  耗時：1 秒

步驟 4：登入新帳號
  彈出登入對話框：
  ┌──────────────────────────┐
  │ 🔐 請重新登入             │
  │                          │
  │ 1. 點擊【登入】按鈕       │
  │ 2. 輸入帳號密碼           │
  │ 3. 點擊【確認完成】       │
  │                          │
  │ [✅ 確認完成] [❌ 取消]   │
  └──────────────────────────┘
  
  在主界面：
  - 點擊【登入】
  - 輸入帳號B的用戶名和密碼
  - 等待登入成功
  - 回到對話框，點擊【確認完成】

步驟 5：自動繼續
  ✅ 驗證登入成功
  ✅ 跳過失敗的用戶
  ✅ 繼續發送下一個
  
  完成！


⚡ 效率對比
-----------

❌ 以前的方式：
  程序崩潰
    ↓
  手動運行 quick-fix.bat
    ↓
  重新啟動程序
    ↓
  重新登入
    ↓
  重新匯入清單
    ↓
  重新開始群發
  
  ⏰ 耗時：5-10 分鐘
  😓 繁瑣且容易出錯

✅ 現在的方式：
  彈出對話框
    ↓
  點擊【重新登入並繼續】
    ↓
  自動清理（1秒）
    ↓
  輸入新帳號密碼（30秒）
    ↓
  自動繼續發送
  
  ⏰ 耗時：< 1 分鐘
  ✨ 簡單快速


💡 關鍵優勢
-----------
✅ 全自動清理 - 點一個按鈕完成
✅ 無需重啟 - 程序保持運行
✅ 進度保留 - 清單和統計都保留
✅ 超快速 - 效率提升 80-90%
✅ 零錯誤 - 自動處理，不會出錯
✅ 隨時換帳號 - 可以用不同的帳號


📋 實際案例
-----------

案例：群發 50 個用戶，第 20 個時 Session 過期

操作：
1. 彈出對話框
2. 點擊【重新登入並繼續】
3. 等待 1 秒自動清理
4. 輸入帳號B的密碼（或換新帳號）
5. 點擊【確認完成】
6. ✅ 自動繼續發送剩餘 30 個用戶

結果：
✅ 完成 50 個用戶的群發
⏰ 換帳號耗時：< 1 分鐘
🎉 無需重啟，無需重新匯入！


⚠️ 重要提示
-----------

1. 清理是安全的
   只刪除臨時數據：
   - cookies.json
   - session.json
   - ig-dm.db
   
   不會刪除你的代碼文件

2. 可以換帳號
   清理後可以：
   ✅ 用原來的帳號重新登入
   ✅ 換一個完全不同的帳號
   ✅ 用任何有效的 Instagram 帳號

3. 失敗的用戶會被跳過
   重新登入後：
   - 當前失敗的用戶：跳過
   - 下一個用戶：繼續發送
   
   避免重複發送

4. 準備多個帳號
   建議準備 2-3 個備用帳號：
   - 帳號A：主帳號
   - 帳號B：備用帳號 1
   - 帳號C：備用帳號 2


🎯 什麼時候會觸發？
-------------------

程序會在以下情況自動彈出對話框：

✓ Session 已過期
✓ 帳號需要驗證
✓ 重定向次數過多
✓ 401 Unauthorized
✓ 帳號被臨時限制

只要錯誤訊息包含這些關鍵字：
- "登入"
- "Session"
- "驗證"


🔧 故障排除
-----------

Q：清理後還是失敗怎麼辦？
A：可能是帳號被限制，換一個不同的帳號試試

Q：可以不換帳號，用同一個嗎？
A：可以！輸入同一個帳號的密碼即可

Q：清理會刪除我的清單嗎？
A：不會！清單保留在記憶體中，不受影響

Q：跳過的用戶可以重試嗎？
A：可以！完成後單獨處理跳過的用戶


📚 詳細文檔
-----------

想了解更多？查看這些文檔：

1. 自動清理並換帳號-使用說明.md
   - 完整使用說明
   - 技術細節
   - 實際案例

2. 最新更新-換帳號功能.md
   - 功能更新說明
   - 完整工作流程

3. 完整故障排除指南.md
   - 所有錯誤的解決方案


🎉 立即開始
-----------

啟動程序：
  npm start

或使用一鍵腳本：
  .\quick-fix.bat

開始群發，享受自動清理換帳號功能！


💬 溫馨提示
-----------

首次使用建議：
1. 用 3-5 個測試用戶
2. 測試換帳號流程
3. 確認一切正常
4. 再進行大批量群發

這樣更安心！


================================================
  更新日期：2025-11-01 | 版本：1.4.0
================================================

有問題？查看：
- 自動清理並換帳號-使用說明.md（完整說明）
- 完整故障排除指南.md（錯誤解決）

