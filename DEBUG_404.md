# ğŸ”§ 404 é”™è¯¯æ’æŸ¥æŒ‡å—

## âŒ é”™è¯¯ä¿¡æ¯

```
Request failed with status code 404
```

---

## ğŸ” å¯èƒ½çš„åŸå› 

### 1. Instagram API ç«¯ç‚¹å·²æ›´æ”¹

Instagram çš„ç§æœ‰ API ç»å¸¸å˜åŒ–ï¼ŒæŸäº›ç«¯ç‚¹å¯èƒ½å·²è¢«å¼ƒç”¨æˆ–æ›´æ”¹ã€‚

### 2. ç”¨æˆ·åä¸å­˜åœ¨

å¦‚æœæ‚¨å°è¯•æŠ“å–ä¸å­˜åœ¨çš„ç”¨æˆ·ï¼Œä¼šè¿”å› 404ã€‚

### 3. è´¦å·æƒé™é—®é¢˜

- ç§å¯†è´¦å·æ— æ³•è®¿é—®
- è¢«å°é”çš„è´¦å·

### 4. ç™»å…¥çŠ¶æ€å¤±æ•ˆ

Session è¿‡æœŸæˆ– Cookie å¤±æ•ˆã€‚

---

## âœ… è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1ï¼šæ›´æ–°ä»£ç ï¼ˆå·²å®Œæˆï¼‰

æˆ‘å·²ç»æ›´æ–°äº†ä»¥ä¸‹ API è°ƒç”¨ï¼š

**ä¹‹å‰ï¼ˆå¯èƒ½è¿”å› 404ï¼‰ï¼š**
```javascript
/api/v1/accounts/edit/web_form_data/     âŒ ä¸ç¨³å®š
/api/v1/users/web_profile_info/          âŒ ç»å¸¸å˜åŒ–
```

**ç°åœ¨ï¼ˆæ›´ç¨³å®šï¼‰ï¼š**
```javascript
/                                         âœ… ä¸»é¡µï¼ˆæå–ç”¨æˆ·ä¿¡æ¯ï¼‰
/{username}/                              âœ… ç”¨æˆ·é¡µé¢
/api/v1/direct_v2/...                     âœ… ç§ä¿¡ API
/api/v1/friendships/{id}/followers/       âœ… ç²‰ä¸åˆ—è¡¨
```

---

### æ–¹æ¡ˆ 2ï¼šæ£€æŸ¥ç”¨æˆ·å

ç¡®è®¤ç”¨æˆ·åæ­£ç¡®ï¼š

```
âœ… æ­£ç¡®: instagram
âœ… æ­£ç¡®: cristiano
âŒ é”™è¯¯: @instagram  (ä¸è¦åŒ…å« @)
âŒ é”™è¯¯: instagram.com (ä¸è¦åŒ…å«åŸŸå)
```

---

### æ–¹æ¡ˆ 3ï¼šæµ‹è¯•è¿æ¥

åœ¨æµè§ˆå™¨ä¸­æµ‹è¯•ï¼š

1. æ‰“å¼€ https://www.instagram.com/instagram/
2. ç¡®è®¤é¡µé¢å¯ä»¥è®¿é—®
3. ç¡®è®¤ç”¨æˆ·å­˜åœ¨

---

### æ–¹æ¡ˆ 4ï¼šé‡æ–°ç™»å…¥

1. å…³é—­åº”ç”¨
2. åˆ é™¤æ•°æ®åº“æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰ï¼š
   ```
   Windows: %APPDATA%/ig-dm-helper/igdm.db
   ```
3. é‡æ–°å¯åŠ¨åº”ç”¨
4. é‡æ–°ç™»å…¥

---

## ğŸ› ï¸ è°ƒè¯•æ­¥éª¤

### 1. æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—

ç°åœ¨ä»£ç ä¼šè¾“å‡ºè¯¦ç»†é”™è¯¯ä¿¡æ¯ï¼š

```javascript
Instagram API Error: {
    url: '/api/v1/...',
    method: 'GET',
    status: 404,
    statusText: 'Not Found'
}
```

**å¦‚ä½•æŸ¥çœ‹ï¼š**
1. ç¼–è¾‘ `main.js`
2. å–æ¶ˆæ³¨é‡Šè¿™ä¸€è¡Œï¼š
   ```javascript
   mainWindow.webContents.openDevTools();
   ```
3. é‡å¯åº”ç”¨
4. åœ¨ Console æ ‡ç­¾æŸ¥çœ‹é”™è¯¯

---

### 2. æµ‹è¯•åŸºæœ¬åŠŸèƒ½

**æµ‹è¯• 1ï¼šæ£€æŸ¥ç™»å…¥çŠ¶æ€**
```javascript
// åœ¨å¼€å‘è€…å·¥å…·çš„ Console ä¸­æ‰§è¡Œ
fetch('https://www.instagram.com/')
  .then(r => r.text())
  .then(html => {
    const match = html.match(/"username":"([^"]+)"/);
    console.log('å½“å‰ç”¨æˆ·:', match ? match[1] : 'æœªç™»å…¥');
  });
```

**æµ‹è¯• 2ï¼šæ£€æŸ¥ç”¨æˆ·æ˜¯å¦å­˜åœ¨**
```javascript
fetch('https://www.instagram.com/instagram/')
  .then(r => {
    console.log('çŠ¶æ€ç :', r.status);
    return r.text();
  })
  .then(html => {
    const match = html.match(/"user_id":"(\d+)"/);
    console.log('ç”¨æˆ· ID:', match ? match[1] : 'æœªæ‰¾åˆ°');
  });
```

---

## ğŸ”„ å·²æ›´æ–°çš„åŠŸèƒ½

### `checkLoginStatus()` - æ£€æŸ¥ç™»å…¥çŠ¶æ€

**æ”¹è¿›ï¼š**
- âœ… ä½¿ç”¨ä¸»é¡µé¢è€Œéç§æœ‰ API
- âœ… ä» HTML æå–ç”¨æˆ·ä¿¡æ¯
- âœ… æ›´ç¨³å®šå¯é 

**ä»£ç ï¼š**
```javascript
async checkLoginStatus() {
    const response = await this.client.get('/');
    // ä» HTML ä¸­æå–ç”¨æˆ·ä¿¡æ¯
    const userMatch = response.data.match(/"username":"([^"]+)"/);
    const idMatch = response.data.match(/"id":"([^"]+)"/);
    return !!(userMatch && idMatch);
}
```

---

### `getUserId()` - è·å–ç”¨æˆ· ID

**æ”¹è¿›ï¼š**
- âœ… è®¿é—®ç”¨æˆ·é¡µé¢è€Œé API
- âœ… æ”¯æŒå¤šç§è§£ææ–¹æ³•
- âœ… æœ‰å¤‡ç”¨æ–¹æ¡ˆ

**ä»£ç ï¼š**
```javascript
async getUserId(username) {
    const response = await this.client.get(`/${username}/`);
    // æ–¹æ³• 1: ä» script æ ‡ç­¾æå–
    const match = response.data.match(/"user_id":"(\d+)"/);
    if (match) return match[1];
    
    // æ–¹æ³• 2: ä» JSON-LD æå–
    // ...å¤‡ç”¨æ–¹æ¡ˆ
}
```

---

## ğŸ“Š å¸¸è§ 404 åœºæ™¯

### åœºæ™¯ 1ï¼šç™»å…¥æ—¶è¿”å› 404

**å¯èƒ½åŸå› ï¼š**
- ç™»å…¥ç«¯ç‚¹æ­£å¸¸ï¼ˆ`/api/v1/web/accounts/login/ajax/`ï¼‰
- é€šå¸¸ä¸æ˜¯è¿™ä¸ªé—®é¢˜

**è§£å†³ï¼š**
- æ£€æŸ¥ç”¨æˆ·åå¯†ç 
- ç¡®è®¤ç½‘ç»œè¿æ¥

---

### åœºæ™¯ 2ï¼šå‘é€ç§ä¿¡æ—¶è¿”å› 404

**å¯èƒ½åŸå› ï¼š**
- ç›®æ ‡ç”¨æˆ·ä¸å­˜åœ¨
- æ— æ³•åˆ›å»ºå¯¹è¯

**è§£å†³ï¼š**
```javascript
// ç¡®è®¤ç”¨æˆ·å­˜åœ¨
const userId = await getUserId('ç›®æ ‡ç”¨æˆ·å');
if (!userId) {
    console.log('ç”¨æˆ·ä¸å­˜åœ¨æˆ–æ— æ³•è®¿é—®');
}
```

---

### åœºæ™¯ 3ï¼šæŠ“å–ç²‰ä¸æ—¶è¿”å› 404

**å¯èƒ½åŸå› ï¼š**
- ç”¨æˆ·åé”™è¯¯
- è´¦å·ç§å¯†ä¸”æœªå…³æ³¨

**è§£å†³ï¼š**
```javascript
// æµ‹è¯•ç”¨å…¬å¼€è´¦å·
const result = await fetchFollowers('instagram', { end: 10 });
if (result.success) {
    console.log('API æ­£å¸¸å·¥ä½œ');
}
```

---

## ğŸš¨ ç´§æ€¥ä¿®å¤

å¦‚æœé—®é¢˜æŒç»­ï¼Œä½¿ç”¨ Puppeteer ç‰ˆæœ¬ä½œä¸ºå¤‡ç”¨ï¼š

```bash
# 1. å®‰è£… Puppeteer
npm install puppeteer@^21.5.0

# 2. åˆ‡æ¢åˆ° Puppeteer ç‰ˆæœ¬
git checkout <previous-commit>

# æˆ–ä½¿ç”¨å¤‡ä»½
```

---

## ğŸ“ è·å–å¸®åŠ©

### æä¾›è¿™äº›ä¿¡æ¯ï¼š

1. **é”™è¯¯å®Œæ•´è¾“å‡ºï¼š**
   ```
   Instagram API Error: {
       url: '...',
       method: '...',
       status: 404
   }
   ```

2. **æ‚¨åœ¨åšä»€ä¹ˆï¼š**
   - ç™»å…¥
   - å‘é€ç§ä¿¡
   - æŠ“å–ç²‰ä¸

3. **ç”¨æˆ·åï¼š**
   - æ‚¨çš„è´¦å·
   - ç›®æ ‡è´¦å·

4. **æ—¥å¿—ï¼š**
   - å¼€å‘è€…å·¥å…·çš„ Console è¾“å‡º

---

## âœ… éªŒè¯ä¿®å¤

è¿è¡Œä»¥ä¸‹æµ‹è¯•ï¼š

```bash
# 1. é‡å¯åº”ç”¨
npm start

# 2. æµ‹è¯•ç™»å…¥
è¾“å…¥è´¦å·å¯†ç  â†’ ç™»å…¥

# 3. æµ‹è¯•åŠŸèƒ½
# a) æŠ“å–å…¬å¼€è´¦å·ç²‰ä¸
ç›®æ ‡ï¼šinstagram
èŒƒå›´ï¼š1-10

# b) å¦‚æœæˆåŠŸï¼Œè¯´æ˜ API æ­£å¸¸

# c) å¦‚æœè¿˜æ˜¯ 404ï¼š
- æ£€æŸ¥ç”¨æˆ·åæ‹¼å†™
- ç¡®è®¤ç½‘ç»œè¿æ¥
- æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—
```

---

## ğŸ¯ æ€»ç»“

### å·²ä¿®å¤ï¼š

- âœ… æ›´ç¨³å®šçš„ API ç«¯ç‚¹
- âœ… è¯¦ç»†é”™è¯¯æ—¥å¿—
- âœ… å¤šä¸ªå¤‡ç”¨æ–¹æ¡ˆ
- âœ… æ›´å¥½çš„é”™è¯¯å¤„ç†

### å¦‚ä½•é¿å…ï¼š

1. **ä½¿ç”¨ç¨³å®šç«¯ç‚¹**
2. **éªŒè¯ç”¨æˆ·å**
3. **æ£€æŸ¥æƒé™**
4. **å®šæœŸæ›´æ–°ä»£ç **

---

**ç°åœ¨é‡æ–°å¯åŠ¨åº”ç”¨è¯•è¯•ï¼** ğŸš€

