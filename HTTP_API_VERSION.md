# ğŸš€ HTTP API ç‰ˆæœ¬ä½¿ç”¨æŒ‡å—

## ğŸ“‹ é‡å¤§æ›´æ–°

**æ‚¨çš„æ‡‰ç”¨å·²å‡ç´šç‚ºå®Œå…¨åŸºæ–¼ HTTP API çš„ç‰ˆæœ¬ï¼**

### âœ… ä¸»è¦è®ŠåŒ–

1. **ç§»é™¤ Puppeteer/Chromium**
   - âŒ ä¸å†éœ€è¦æ‰“é–‹ç€è¦½å™¨
   - âœ… ç›´æ¥ä½¿ç”¨ HTTP è«‹æ±‚èˆ‡ Instagram API é€šè¨Š

2. **æ›´è¼•é‡**
   - å¾ ~300MB æ¸›å°‘åˆ° ~50MB
   - å•Ÿå‹•é€Ÿåº¦å¿« 10 å€ä»¥ä¸Š

3. **æ›´éš±è”½**
   - ä¸æœƒè¢«åµæ¸¬ç‚ºè‡ªå‹•åŒ–ç€è¦½å™¨
   - æ›´é›£è¢« Instagram å°é–

---

## ğŸ”§ å®‰è£æ­¥é©Ÿ

### 1. å®‰è£ä¾è³´

```bash
npm install
```

**æ³¨æ„ï¼š** å·²ç§»é™¤ `puppeteer`ï¼Œæ”¹ç”¨ `axios` é€²è¡Œ HTTP è«‹æ±‚ã€‚

### 2. å•Ÿå‹•æ‡‰ç”¨

```bash
npm start
```

---

## ğŸ“– ä½¿ç”¨èªªæ˜

### é¦–æ¬¡ä½¿ç”¨

1. **å•Ÿå‹•æ‡‰ç”¨å¾Œï¼Œæœƒçœ‹åˆ°ç™»å…¥ç•«é¢**
   - è¼¸å…¥æ‚¨çš„ Instagram å¸³è™Ÿ
   - è¼¸å…¥å¯†ç¢¼
   - é»æ“Šã€Œç™»å…¥ã€æŒ‰éˆ•

2. **ç™»å…¥æˆåŠŸå¾Œ**
   - è‡ªå‹•ä¿å­˜ Session
   - ä¸‹æ¬¡å•Ÿå‹•å¯ç›´æ¥é»ã€Œåˆå§‹åŒ–ã€æŒ‰éˆ•

### å†æ¬¡ä½¿ç”¨

1. **å·²ä¿å­˜ç™»å…¥ç‹€æ…‹**
   - ç›´æ¥é»æ“Šã€Œåˆå§‹åŒ–ã€æŒ‰éˆ•
   - ç„¡éœ€é‡æ–°è¼¸å…¥å¸³è™Ÿå¯†ç¢¼

2. **å¦‚éœ€é‡æ–°ç™»å…¥**
   - è¼¸å…¥æ–°çš„å¸³è™Ÿå¯†ç¢¼
   - é»æ“Šã€Œç™»å…¥ã€æŒ‰éˆ•

---

## ğŸ¯ åŠŸèƒ½åˆ—è¡¨

### âœ… å·²å¯¦ç¾çš„åŠŸèƒ½

| åŠŸèƒ½ | ç‹€æ…‹ | èªªæ˜ |
|------|------|------|
| **ç™»å…¥** | âœ… | HTTP API ç™»å…¥ï¼Œè‡ªå‹•ä¿å­˜ Session |
| **ç™¼é€ç§è¨Š** | âœ… | ç›´æ¥èª¿ç”¨ Instagram Direct Message API |
| **æ‰¹é‡ç¾¤ç™¼** | âœ… | æ”¯æ´æš«åœ/ç¹¼çºŒ/åœæ­¢ |
| **æŠ“å–ç²‰çµ²** | âœ… | åˆ†é ç²å–ï¼Œæ”¯æ´å¤§é‡ç²‰çµ² |
| **Session ç®¡ç†** | âœ… | Cookie å’Œ CSRF Token è‡ªå‹•ç®¡ç† |

### ğŸ”’ å®‰å…¨ç‰¹æ€§

- âœ… **è‡ªå‹•è™•ç† CSRF Token**
- âœ… **Cookie æŒä¹…åŒ–**
- âœ… **User-Agent å½è£**
- âœ… **è«‹æ±‚å»¶é²ï¼ˆ30-60ç§’éš¨æ©Ÿï¼‰**
- âœ… **éŒ¯èª¤é‡è©¦æ©Ÿåˆ¶**

---

## âš™ï¸ æŠ€è¡“æ¶æ§‹

### æ ¸å¿ƒæ¨¡å¡Š

```
src/
â”œâ”€â”€ instagram-api.js     # Instagram HTTP API å®¢æˆ¶ç«¯
â”œâ”€â”€ database.js          # SQLite æ•¸æ“šåº«
â””â”€â”€ license.js           # æˆæ¬Šç®¡ç†
```

### Instagram API å®¢æˆ¶ç«¯

```javascript
const InstagramAPI = require('./src/instagram-api');

// å‰µå»ºå¯¦ä¾‹
const ig = new InstagramAPI();

// åˆå§‹åŒ–
await ig.initialize();

// ç™»å…¥
const result = await ig.login('username', 'password');

// ç™¼é€ç§è¨Š
await ig.sendDirectMessage('target_username', 'Hello!');

// ç²å–ç²‰çµ²
const followers = await ig.fetchFollowers('username');
```

---

## ğŸ› ï¸ API èªªæ˜

### InstagramAPI é¡

#### `initialize()`
åˆå§‹åŒ– APIï¼Œç²å–åŸºæœ¬ Cookie å’Œ CSRF Token

```javascript
const result = await ig.initialize();
// { success: true, message: 'Instagram API åˆå§‹åŒ–æˆåŠŸ' }
```

#### `login(username, password)`
ç™»å…¥ Instagram

```javascript
const result = await ig.login('your_username', 'your_password');
// { success: true, userId: '123456', username: 'your_username' }
```

#### `sendDirectMessage(username, message)`
ç™¼é€ç§è¨Š

```javascript
const result = await ig.sendDirectMessage('target_user', 'Hello!');
// { success: true, username: 'target_user', threadId: '...' }
```

#### `fetchFollowers(username, maxCount)`
ç²å–ç²‰çµ²åˆ—è¡¨

```javascript
const result = await ig.fetchFollowers('some_user', 100);
// { success: true, followers: ['user1', 'user2', ...], count: 100 }
```

#### `loadSession(cookiesData)`
è¼‰å…¥å·²ä¿å­˜çš„ Session

```javascript
ig.loadSession({ csrftoken: '...', sessionid: '...' });
```

#### `getSessionData()`
ç²å–ç•¶å‰ Session æ•¸æ“š

```javascript
const data = ig.getSessionData();
// { cookies: {...}, csrfToken: '...', userId: '...', username: '...' }
```

---

## âš ï¸ æ³¨æ„äº‹é …

### ç™»å…¥é™åˆ¶

1. **Instagram å¯èƒ½æœƒè¦æ±‚é©—è­‰**
   - å¦‚æœå¸³è™Ÿé–‹å•Ÿé›™é‡é©—è­‰ï¼Œç›®å‰ç‰ˆæœ¬ç„¡æ³•ç™»å…¥
   - å»ºè­°ä½¿ç”¨æ²’æœ‰é›™é‡é©—è­‰çš„æ¸¬è©¦å¸³è™Ÿ

2. **é »ç¹ç™»å…¥å¯èƒ½è§¸ç™¼å®‰å…¨æª¢æŸ¥**
   - å»ºè­°ä¿å­˜ Sessionï¼Œé¿å…é »ç¹ç™»å…¥
   - ä½¿ç”¨ã€Œåˆå§‹åŒ–ã€åŠŸèƒ½è¼‰å…¥å·²ä¿å­˜çš„ç‹€æ…‹

### ä½¿ç”¨å»ºè­°

1. **æ§åˆ¶ç™¼é€é »ç‡**
   - æ¯å¤©ç™¼é€æ•¸é‡ä¸è¦è¶…é 50-100 æ¢
   - ä½¿ç”¨éš¨æ©Ÿå»¶é²ï¼ˆ30-60ç§’ï¼‰

2. **é¿å…åƒåœ¾è¨Šæ¯**
   - ä¸è¦ç™¼é€é‡è¤‡å…§å®¹
   - å€‹æ€§åŒ–è¨Šæ¯å…§å®¹

3. **ä½¿ç”¨å°è™Ÿæ¸¬è©¦**
   - å…ˆç”¨æ¸¬è©¦å¸³è™Ÿé©—è­‰åŠŸèƒ½
   - ç¢ºä¿ç©©å®šå¾Œå†ç”¨ä¸»å¸³è™Ÿ

---

## ğŸ› å¸¸è¦‹å•é¡Œ

### Q: ç™»å…¥å¤±æ•—æ€éº¼è¾¦ï¼Ÿ

**A:** å¯èƒ½åŸå› ï¼š
1. å¸³è™Ÿå¯†ç¢¼éŒ¯èª¤
2. å¸³è™Ÿé–‹å•Ÿäº†é›™é‡é©—è­‰
3. Instagram åµæ¸¬åˆ°ç•°å¸¸ç™»å…¥
4. ç¶²è·¯é€£æ¥å•é¡Œ

**è§£æ±ºæ–¹æ¡ˆï¼š**
- ç¢ºèªå¸³è™Ÿå¯†ç¢¼æ­£ç¢º
- é—œé–‰é›™é‡é©—è­‰
- ä½¿ç”¨ VPN æˆ–æ›´æ›ç¶²è·¯
- ç­‰å¾…ä¸€æ®µæ™‚é–“å¾Œå†è©¦

### Q: ç™¼é€è¨Šæ¯å¤±æ•—ï¼Ÿ

**A:** å¯èƒ½åŸå› ï¼š
1. ç›®æ¨™ç”¨æˆ¶ä¸å­˜åœ¨
2. è¢«ç›®æ¨™ç”¨æˆ¶å°é–
3. Instagram é™åˆ¶ï¼ˆç™¼é€éæ–¼é »ç¹ï¼‰
4. Session éæœŸ

**è§£æ±ºæ–¹æ¡ˆï¼š**
- ç¢ºèªç›®æ¨™ç”¨æˆ¶åæ­£ç¢º
- æ¸›å°‘ç™¼é€é »ç‡
- é‡æ–°ç™»å…¥

### Q: èˆ‡èˆŠç‰ˆæœ¬ï¼ˆPuppeteerï¼‰ç›¸æ¯”æœ‰ä»€éº¼å„ªç¼ºé»ï¼Ÿ

**A:** 

**å„ªé»ï¼š**
- âš¡ å•Ÿå‹•é€Ÿåº¦å¿« 10 å€
- ğŸ’¾ é«”ç©å°ï¼ˆå¾ 300MB åˆ° 50MBï¼‰
- ğŸ”’ æ›´é›£è¢«åµæ¸¬
- ğŸš€ æ€§èƒ½æ›´å¥½
- ğŸ’° è³‡æºæ¶ˆè€—ä½

**ç¼ºé»ï¼š**
- âŒ ä¸æ”¯æ´é›™é‡é©—è­‰ç™»å…¥
- âŒ Instagram API è®Šæ›´å¯èƒ½å°è‡´åŠŸèƒ½å¤±æ•ˆ
- âŒ æŸäº›è¤‡é›œæ“ä½œå¯èƒ½ç„¡æ³•å¯¦ç¾

---

## ğŸ“ˆ æ€§èƒ½å°æ¯”

| æŒ‡æ¨™ | Puppeteer ç‰ˆæœ¬ | HTTP API ç‰ˆæœ¬ |
|------|---------------|---------------|
| æ‡‰ç”¨å¤§å° | ~300MB | ~50MB |
| å•Ÿå‹•æ™‚é–“ | ~10ç§’ | ~1ç§’ |
| è¨˜æ†¶é«”ä½¿ç”¨ | ~200MB | ~50MB |
| CPU ä½¿ç”¨ | é«˜ | ä½ |
| ç™¼é€é€Ÿåº¦ | æ…¢ï¼ˆéœ€è¦æ¸²æŸ“é é¢ï¼‰ | å¿«ï¼ˆç›´æ¥ APIï¼‰ |
| è¢«åµæ¸¬é¢¨éšª | ä¸­é«˜ | ä½ |

---

## ğŸ”„ é™ç´šåˆ° Puppeteer ç‰ˆæœ¬

å¦‚æœæ‚¨éœ€è¦å›åˆ° Puppeteer ç‰ˆæœ¬ï¼š

```bash
# 1. å®‰è£ Puppeteer
npm install puppeteer@^21.5.0

# 2. æ¢å¾©èˆŠçš„ main.js
git checkout <commit_hash> main.js

# 3. æ¢å¾©èˆŠçš„ HTML/CSS
git checkout <commit_hash> index.html renderer.js styles.css
```

---

## ğŸ“ æŠ€è¡“æ”¯æŒ

å¦‚æœ‰ä»»ä½•å•é¡Œï¼Œè«‹è¯ç¹«ï¼š
- **å“ç‰Œ**: FlowCubeï¼ˆæµé‡é­”æ–¹ï¼‰
- **LINE**: @flowcube
- **ç¶²ç«™**: https://line.me/R/ti/p/@flowcube

---

## ğŸ“„ ç‰ˆæœ¬è¨˜éŒ„

### v2.0.0 (HTTP API ç‰ˆæœ¬)
- âœ¨ å®Œå…¨é‡å¯«ç‚º HTTP API æ¶æ§‹
- âœ¨ ç§»é™¤ Puppeteer ä¾è³´
- âœ¨ æ–°å¢å…§å»ºç™»å…¥ç•Œé¢
- âœ¨ å„ªåŒ–æ€§èƒ½å’Œé«”ç©
- âœ¨ å¢å¼·å®‰å…¨æ€§å’Œéš±è”½æ€§

### v1.0.0 (Puppeteer ç‰ˆæœ¬)
- âœ… åŸºç¤åŠŸèƒ½å¯¦ç¾
- âœ… æ‰¹é‡ç§è¨Š
- âœ… ç²‰çµ²åŒ¯å‡º

---

**ğŸ‰ äº«å—æ›´å¿«ã€æ›´è¼•é‡çš„ Instagram è‡ªå‹•åŒ–é«”é©—ï¼**

